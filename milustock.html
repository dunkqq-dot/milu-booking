<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>éº‹é¹¿æ°£çƒ - æ•´åˆå‚™è²¨ç®¡ç†ç³»çµ±</title>
    <!-- è¼‰å…¥æ ¸å¿ƒå¥—ä»¶ -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=Noto+Sans+TC:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', 'Noto Sans TC', sans-serif; background-color: #f8fafc; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .spin { animation: spin 1s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        /* å“ç‰Œç¶ è‰²æ¼¸å±¤ */
        .primary-gradient { background: linear-gradient(135deg, #065f46 0%, #10b981 100%); }
        .modal-overlay { background-color: rgba(0, 0, 0, 0.5); backdrop-filter: blur(4px); }
        .order-card { transition: all 0.2s ease-out; }
        .status-btn { transition: all 0.1s ease-in-out; }
        .status-btn:active { transform: scale(0.95); }
    </style>
</head>
<body class="min-h-screen">

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo, useCallback, memo, useRef } = React;

        // --- è¼”åŠ©å‡½å¼ï¼šå–å¾—æœ¬åœ°æ—¥æœŸå­—ä¸² YYYY-MM-DD ---
        const getLocalDateString = (date) => {
            const y = date.getFullYear();
            const m = String(date.getMonth() + 1).padStart(2, '0');
            const d = String(date.getDate()).padStart(2, '0');
            return `${y}-${m}-${d}`;
        };

        // --- ç³»çµ±è¨­å®š ---
        const CONFIG = {
            OFFICIAL: {
                name: "å®˜ç¶²ç³»çµ±",
                url: "https://script.google.com/macros/s/AKfycbwhH5axa1J6Q9nThs0Z8SQ3O4aEUAsTg5p9aTa1Mdwe-iJAd1GbI8t2SS1KnF6MDCTqBQ/exec",
                statusField: "å‚™è²¨ç‹€æ…‹",
                params: "action=getOrders"
            },
            MILU: {
                name: "MILUç³»çµ±",
                url: "https://script.google.com/macros/s/AKfycbyL1VarFpdQhPe24Fj9RQrGYoGunAcm1XNxlZwIW-kr_3CqG_hvQgWoS0xpCb9zb0vdjQ/exec",
                statusField: "æ’¿è²¨ç‹€æ…‹",
                params: "mode=api"
            }
        };

        const CATEGORIES = ["å…¨éƒ¨", "å°ˆäººä½ˆç½®", "æ°£çƒå¤–é€", "å·¥ä½œå®¤å–è²¨", "å¾Œè»Šå»‚ä½ˆç½®", "å®˜ç¶²è¨‚å–®"];

        const FIELD_MAPS = {
            id: ["è¨‚å–®ç·¨è™Ÿ", "ç·¨è™Ÿ", "OrderID"],
            name: ["æ”¶ä»¶äººå§“å", "æ”¶ä»¶äºº", "å®¢æˆ¶åç¨±", "å§“å"],
            address: ["è©³ç´°åœ°å€", "åœ°å€", "é€è²¨åœ°å€", "åœ°é»"],
            date: ["æ—¥æœŸ", "é€è²¨æ—¥æœŸ", "é ç´„æ—¥æœŸ", "å–è²¨/é€è²¨æ—¥æœŸ"],
            time: ["æ™‚é–“/æ™‚æ®µ", "é€è²¨æ™‚æ®µ", "é…é€æ™‚æ®µ", "é ç´„æ™‚é–“", "æ™‚é–“"],
            status: ["å‚™è²¨ç‹€æ…‹", "æ’¿è²¨ç‹€æ…‹", "å‚™è²¨"],
            payment: ["ä»˜æ¬¾ç‹€æ…‹", "ç‹€æ…‹", "ä»˜æ¬¾", "æ”¯ä»˜ç‹€æ…‹"],
            remark: ["å‚™è¨»", "å‚™è¨»æ¬„", "æ³¨æ„äº‹é …"],
            itemType: ["å“é …é¡å‹", "å“é …"],
        };

        const LucideIcon = memo(({ name, size = 18, className = "" }) => {
            useEffect(() => { if (window.lucide) window.lucide.createIcons(); }, [name]);
            return <i data-lucide={name} className={className} style={{ width: size, height: size }}></i>;
        });

        // --- è¨‚å–®å¡ç‰‡å…ƒä»¶ ---
        const OrderCard = memo(({ order, config, findVal, handleUpdate, isSyncing }) => {
            const status = findVal(order, 'status');
            const iType = findVal(order, 'itemType');
            const rawId = findVal(order, 'id');
            const displayId = String(rawId).startsWith('#') ? rawId : `#${rawId}`;

            return (
                <div className={`order-card bg-white rounded-[2.5rem] shadow-sm border border-slate-100 p-7 relative ${isSyncing ? 'opacity-70' : ''}`}>
                    {isSyncing && (
                        <div className="absolute top-4 right-8 flex items-center gap-1 text-[9px] font-bold text-emerald-600 animate-pulse">
                            <LucideIcon name="cloud-upload" size={12} /> åŒæ­¥ä¸­...
                        </div>
                    )}
                    <div className="flex justify-between items-start mb-5">
                        <div className="space-y-1.5">
                            <div className="flex gap-2 flex-wrap">
                                <span className={`text-[9px] font-black px-2 py-0.5 rounded border ${order._src === "OFFICIAL" ? "bg-blue-50 text-blue-600 border-blue-100" : "bg-emerald-50 text-emerald-600 border-emerald-100"}`}>
                                    {config[order._src].name}
                                </span>
                                <span className="text-[9px] font-black bg-slate-100 text-slate-400 px-2 py-0.5 rounded uppercase">{order["__sheet__"]}</span>
                                {iType && iType !== "-" && <span className="text-[9px] font-black bg-amber-50 text-amber-600 px-2 py-0.5 rounded border border-amber-100">âœ¨ {iType}</span>}
                            </div>
                            <h4 className="font-black text-2xl text-slate-800">{findVal(order, 'name')}</h4>
                            <p className="text-[10px] font-bold text-slate-300 tracking-wider">{displayId}</p>
                        </div>
                        <div className={`text-[10px] font-black px-4 py-1.5 rounded-full shadow-sm transition-colors duration-200 ${
                            status.includes("æª¢æŸ¥") ? "bg-emerald-500 text-white" : status.includes("å·²å‚™") ? "bg-amber-400 text-white" : "bg-red-600 text-white"
                        }`}>{status || "æœªæ’¿å–"}</div>
                    </div>

                    <div className="space-y-3 mb-6">
                        <div className="flex items-center gap-3 text-slate-700 font-black bg-slate-50 p-3 rounded-2xl w-fit border border-slate-100">
                            <LucideIcon name="clock" className="text-emerald-500" />
                            <span>{findVal(order, 'time')}</span>
                        </div>
                        <div className="flex items-start gap-3 px-1">
                            <LucideIcon name="map-pin" className="shrink-0 mt-0.5 text-slate-300" />
                            <span className="text-sm text-slate-500 font-bold leading-relaxed">{findVal(order, 'address')}</span>
                        </div>
                    </div>

                    <div className="grid grid-cols-3 gap-2">
                        {["æœªæ’¿å–", "å·²å‚™è²¨", "æª¢æŸ¥å®Œç•¢"].map((st) => (
                            <button key={st} disabled={isSyncing} onClick={() => handleUpdate(order, st)} 
                                className={`status-btn py-4 rounded-2xl text-[11px] font-black border transition-all active:scale-95 ${
                                    status === st || (!status && st === "æœªæ’¿å–") ? 'bg-slate-800 text-white shadow-xl' : 'bg-white text-slate-400 border-slate-100 hover:bg-slate-50'
                                }`}>{st}</button>
                        ))}
                    </div>
                </div>
            );
        });

        const App = () => {
            const [orders, setOrders] = useState([]);
            const [loading, setLoading] = useState(false);
            const [currentMonth, setCurrentMonth] = useState(new Date());
            const [selectedDate, setSelectedDate] = useState(getLocalDateString(new Date()));
            const [currentCategory, setCurrentCategory] = useState("å…¨éƒ¨");
            const [toast, setToast] = useState(null);
            
            // è¿½è¹¤æ­£åœ¨åŒæ­¥ä¸­çš„è¨‚å–® IDï¼Œé˜²æ­¢è¢«èƒŒæ™¯åˆ·æ–°è¦†è“‹
            const [syncingIds, setSyncingIds] = useState(new Set());
            // è¨˜éŒ„æœ€è¿‘æ›´æ–°çš„æ™‚é–“æˆ³ï¼Œç”¨æ–¼ Anti-Flicker
            const lastUpdateRef = useRef({});

            const findVal = useCallback((order, type) => {
                if (!order) return "";
                const keys = Object.keys(order);
                const targets = FIELD_MAPS[type] || [];
                const cleanKeys = keys.filter(k => !k.includes("æˆ³è¨˜") && !k.toLowerCase().includes("timestamp"));
                
                let actualKey = targets.reduce((found, t) => found || cleanKeys.find(k => k.trim() === t), null) || 
                                targets.reduce((found, t) => found || cleanKeys.find(k => k.includes(t)), null);
                
                let val = actualKey ? order[actualKey] : "";
                if (type === 'date' && val) {
                    const d = new Date(val);
                    if (!isNaN(d.getTime())) {
                        if (String(val).includes("T") && !String(val).includes("1899")) d.setHours(d.getHours() + 8);
                        return `${d.getFullYear()}/${String(d.getMonth() + 1).padStart(2, '0')}/${String(d.getDate()).padStart(2, '0')}`;
                    }
                }
                if (type === 'time' && val) {
                    const d = new Date(val);
                    if (!isNaN(d.getTime())) {
                        if (order._src === "MILU") { d.setMinutes(d.getMinutes() - 38); }
                        const hh = d.getHours(), mm = d.getMinutes();
                        return `${hh >= 12 ? 'ä¸‹åˆ' : 'ä¸Šåˆ'} ${hh % 12 || 12}:${String(mm).padStart(2, '0')}`;
                    }
                }
                return String(val || "").trim();
            }, []);

            const fetchAllData = useCallback(async (silent = false) => {
                if (!silent) setLoading(true);
                try {
                    const [resOff, resMilu] = await Promise.all([
                        fetch(`${CONFIG.OFFICIAL.url}?${CONFIG.OFFICIAL.params}&t=${Date.now()}`).then(r => r.json()).catch(() => []),
                        fetch(`${CONFIG.MILU.url}?${CONFIG.MILU.params}&t=${Date.now()}`).then(r => r.json()).catch(() => [])
                    ]);

                    let combined = [];
                    if (Array.isArray(resOff)) {
                        combined.push(...resOff.map(o => ({ 
                            ...o, _src: "OFFICIAL", _apiUrl: CONFIG.OFFICIAL.url, "__sheet__": "å®˜ç¶²è¨‚å–®" 
                        })));
                    }
                    if (Array.isArray(resMilu) && resMilu.length > 0 && Array.isArray(resMilu[0])) {
                        combined.push(...resMilu.map(row => ({
                            "è¨‚å–®ç·¨è™Ÿ": row[0], "å®¢æˆ¶åç¨±": row[3], "æ—¥æœŸ": row[5], "æ™‚é–“/æ™‚æ®µ": row[6],
                            "åœ°é»": row[7], "ç‹€æ…‹": row[10], "æ’¿è²¨ç‹€æ…‹": row[21], "_src": "MILU", "_apiUrl": CONFIG.MILU.url, "__sheet__": row[row.length - 1] 
                        })));
                    }

                    // --- æ ¸å¿ƒæ”¹å‹•ï¼šé˜²æ­¢è³‡æ–™å›å½ˆ ---
                    setOrders(prevOrders => {
                        return combined.map(newItem => {
                            const key = newItem._src + (newItem["è¨‚å–®ç·¨è™Ÿ"] || newItem["__row__"]);
                            // å¦‚æœé€™ç­†è¨‚å–®åœ¨ 10 ç§’å…§æ›´æ–°éï¼Œå‰‡ä¿ç•™æœ¬åœ°ç‹€æ…‹ï¼Œå¿½ç•¥è©¦ç®—è¡¨çš„èˆŠç‹€æ…‹
                            const lastUpdate = lastUpdateRef.current[key];
                            if (lastUpdate && (Date.now() - lastUpdate < 10000)) {
                                const localItem = prevOrders.find(o => (o._src + (o["è¨‚å–®ç·¨è™Ÿ"] || o["__row__"])) === key);
                                return localItem || newItem;
                            }
                            return newItem;
                        });
                    });
                } finally {
                    setLoading(false);
                }
            }, []);

            // åˆå§‹åŒ–èˆ‡è‡ªå‹•è¼ªè©¢ï¼ˆæ¯ 60 ç§’ï¼‰
            useEffect(() => {
                fetchAllData();
                const timer = setInterval(() => fetchAllData(true), 60000);
                return () => clearInterval(timer);
            }, [fetchAllData]);

            const showToast = (text) => { setToast(text); setTimeout(() => setToast(null), 3000); };

            // --- æ¨‚è§€æ›´æ–° + é˜²æ­¢å›å½ˆæ©Ÿåˆ¶ ---
            const handleUpdate = useCallback(async (order, newStatus) => {
                const key = order._src + (order["è¨‚å–®ç·¨è™Ÿ"] || order["__row__"]);
                
                // 1. ç«‹å³æ›´æ–°æœ¬åœ°ç‹€æ…‹èˆ‡è¨˜éŒ„æ›´æ–°æ™‚é–“
                lastUpdateRef.current[key] = Date.now();
                setSyncingIds(prev => new Set(prev).add(key));
                setOrders(prev => prev.map(o => {
                    if ((o._src + (o["è¨‚å–®ç·¨è™Ÿ"] || o["__row__"])) === key) {
                        return o._src === "MILU" ? { ...o, "æ’¿è²¨ç‹€æ…‹": newStatus } : { ...o, [CONFIG.OFFICIAL.statusField]: newStatus };
                    }
                    return o;
                }));

                // 2. èƒŒæ™¯ç™¼é€è«‹æ±‚
                try {
                    const isMilu = order._src === "MILU";
                    const payload = isMilu ? {
                        action: "UPDATE_ORDER", orderId: order["è¨‚å–®ç·¨è™Ÿ"], service: order["__sheet__"], pickingStatus: newStatus
                    } : {
                        action: "updateStatus", row: order["__row__"], status: newStatus, columnName: CONFIG.OFFICIAL.statusField
                    };

                    const response = await fetch(order._apiUrl, { method: "POST", body: JSON.stringify(payload) });
                    if (!response.ok) throw new Error();
                    
                    showToast(`æ›´æ–°æˆåŠŸï¼š${newStatus}`);
                    // æˆåŠŸå¾Œå»¶é²ä¸€ä¸‹å†é‡æ–°æ•´ç†ï¼Œè®“ Google æœ‰æ™‚é–“å¯«å…¥
                    setTimeout(() => fetchAllData(true), 2000);
                } catch (e) { 
                    showToast("åŒæ­¥å¤±æ•—ï¼Œè«‹æª¢æŸ¥ç¶²è·¯"); 
                    delete lastUpdateRef.current[key]; // å¤±æ•—å‰‡æ¸…é™¤è¨˜éŒ„ï¼Œè®“åŒæ­¥èƒ½è“‹å›ä¾†
                } finally {
                    setSyncingIds(prev => {
                        const next = new Set(prev);
                        next.delete(key);
                        return next;
                    });
                }
            }, [fetchAllData]);

            const dayStatusMap = useMemo(() => {
                const stats = {};
                const exclude = ["æœªä»˜æ¬¾", "UNPAID", "å·²å–æ¶ˆ", "CANCELED"];
                orders.forEach(o => {
                    const payStatus = findVal(o, 'payment').toUpperCase();
                    if (exclude.some(k => payStatus.includes(k))) return;

                    const dateKey = findVal(o, 'date').replace(/\//g, '-');
                    if (!dateKey) return;
                    if (!stats[dateKey]) stats[dateKey] = { hasOrders: true, hasUnpicked: false, hasPending: false };
                    
                    const status = o._src === "MILU" ? o["æ’¿è²¨ç‹€æ…‹"] : o[CONFIG.OFFICIAL.statusField];
                    if (status !== "æª¢æŸ¥å®Œç•¢") {
                        if (!status || status === "æœªæ’¿å–") stats[dateKey].hasUnpicked = true;
                        else if (status === "å·²å‚™è²¨") stats[dateKey].hasPending = true;
                    }
                });
                return stats;
            }, [orders, findVal]);

            const filteredOrders = useMemo(() => {
                const exclude = ["æœªä»˜æ¬¾", "UNPAID", "å·²å–æ¶ˆ", "CANCELED"];
                return orders.filter(o => {
                    const payStatus = findVal(o, 'payment').toUpperCase();
                    if (exclude.some(k => payStatus.includes(k))) return false;
                    if (currentCategory !== "å…¨éƒ¨" && o["__sheet__"] !== currentCategory) return false;
                    return findVal(o, 'date').replace(/\//g, '-').includes(selectedDate);
                }).sort((a, b) => findVal(a, 'time').localeCompare(findVal(b, 'time')));
            }, [orders, selectedDate, currentCategory, findVal]);

            const daysArray = useMemo(() => {
                const year = currentMonth.getFullYear();
                const month = currentMonth.getMonth();
                const startDayOfWeek = new Date(year, month, 1).getDay(); // 0=æ—¥
                const totalDays = new Date(year, month + 1, 0).getDate();
                return Array.from({ length: 42 }, (_, i) => {
                    const dayNum = i - startDayOfWeek + 1;
                    return (dayNum > 0 && dayNum <= totalDays) ? getLocalDateString(new Date(year, month, dayNum)) : null;
                });
            }, [currentMonth]);

            return (
                <div className="min-h-screen pb-20">
                    <header className="primary-gradient text-white p-4 sticky top-0 z-40 flex justify-between items-center shadow-lg">
                        <div className="flex items-center gap-3">
                            <LucideIcon name="package" size={24} />
                            <h1 className="text-xl font-black tracking-tight">éº‹é¹¿æ°£çƒ Â· æ•´åˆç®¡ç†</h1>
                        </div>
                        <button onClick={() => fetchAllData()} className="p-2 hover:bg-white/20 rounded-full transition-all">
                            <LucideIcon name="refresh-cw" size={22} className={loading ? "spin" : ""} />
                        </button>
                    </header>

                    <div className="bg-white/80 backdrop-blur-md border-b sticky top-[64px] z-30 overflow-x-auto no-scrollbar">
                        <div className="flex gap-2 max-w-6xl mx-auto p-3 px-4">
                            {CATEGORIES.map(cat => (
                                <button key={cat} onClick={() => setCurrentCategory(cat)}
                                    className={`px-5 py-2 rounded-full text-xs font-black whitespace-nowrap transition-all border ${
                                        currentCategory === cat ? 'bg-emerald-800 text-white border-emerald-800 shadow-lg' : 'bg-slate-50 text-slate-400 border-slate-100'
                                    }`}>
                                    {cat}
                                </button>
                            ))}
                        </div>
                    </div>

                    <main className="max-w-6xl mx-auto p-4 lg:flex gap-8 mt-4">
                        <div className="lg:w-[340px] shrink-0 mb-6">
                            <div className="bg-white rounded-[2.5rem] shadow-sm border p-6 sticky top-[150px]">
                                <div className="flex justify-between items-center mb-6">
                                    <h2 className="font-black text-slate-700 text-lg">{currentMonth.getFullYear()} / {currentMonth.getMonth() + 1}</h2>
                                    <div className="flex gap-1">
                                        <button onClick={() => setCurrentMonth(new Date(currentMonth.getFullYear(), currentMonth.getMonth() - 1, 1))} className="p-2 hover:bg-slate-50 rounded-xl"><LucideIcon name="chevron-left" /></button>
                                        <button onClick={() => setCurrentMonth(new Date(currentMonth.getFullYear(), currentMonth.getMonth() + 1, 1))} className="p-2 hover:bg-slate-50 rounded-xl"><LucideIcon name="chevron-right" /></button>
                                    </div>
                                </div>
                                <div className="grid grid-cols-7 gap-1 text-center">
                                    {['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­'].map(d => <div key={d} className="text-[10px] font-black text-slate-300 py-2 uppercase">{d}</div>)}
                                    {daysArray.map((d, i) => {
                                        const s = dayStatusMap[d];
                                        return (
                                            <div key={i} onClick={() => d && setSelectedDate(d)}
                                                className={`h-11 rounded-2xl flex flex-col items-center justify-center cursor-pointer text-sm font-bold transition-all relative ${
                                                    !d ? '' : d === selectedDate ? 'bg-emerald-800 text-white shadow-lg scale-110 z-10' : 'hover:bg-slate-50 text-slate-600'
                                                }`}>
                                                <span>{d ? parseInt(d.split('-')[2]) : ""}</span>
                                                {s && (
                                                    <div className="flex gap-0.5 absolute bottom-1.5">
                                                        {s.hasOrders && <div className="w-1 h-1 rounded-full bg-emerald-500"></div>}
                                                        {s.hasPending && <div className="w-1 h-1 rounded-full bg-amber-400"></div>}
                                                        {s.hasUnpicked && <div className="w-1 h-1 rounded-full bg-red-600 animate-pulse"></div>}
                                                    </div>
                                                )}
                                            </div>
                                        );
                                    })}
                                </div>
                                <div className="mt-6 pt-4 border-t border-slate-50 text-[10px] text-slate-400 font-bold flex flex-col gap-2 px-1">
                                    <div className="flex items-center gap-2"><div className="w-1.5 h-1.5 rounded-full bg-emerald-500"></div><span>ğŸŸ¢ ç•¶æ—¥æœ‰é è¨‚è¨‚å–®</span></div>
                                    <div className="flex items-center gap-2"><div className="w-1.5 h-1.5 rounded-full bg-amber-400"></div><span>ğŸŸ¡ å°šæœ‰ã€Œå·²å‚™è²¨ / è£½ä½œä¸­ã€è¨‚å–®</span></div>
                                    <div className="flex items-center gap-2"><div className="w-1.5 h-1.5 rounded-full bg-red-600 animate-pulse"></div><span>ğŸ”´ å°šæœ‰ã€Œæœªæ’¿å–ã€è¨‚å–®</span></div>
                                    <div className="mt-1 text-[9px] font-normal italic text-slate-300">â€» ç•¶æ—¥è¨‚å–®çš†ã€Œæª¢æŸ¥å®Œç•¢ã€å¾Œç´…é»ƒç‡ˆå°‡è‡ªå‹•ç†„æ»…</div>
                                </div>
                            </div>
                        </div>

                        <div className="flex-1 space-y-4">
                            <h3 className="font-black text-slate-600 flex items-center gap-2 px-2">
                                <LucideIcon name="list-checks" className="text-emerald-600" /> {selectedDate} æ’ç¨‹ ({filteredOrders.length})
                            </h3>
                            {filteredOrders.length === 0 ? (
                                <div className="py-24 text-center bg-white rounded-[3rem] border-2 border-dashed border-slate-100 text-slate-300 font-black italic">ç•¶æ—¥å°šç„¡å¾…è¾¦äº‹é …</div>
                            ) : (
                                filteredOrders.map((o) => (
                                    <OrderCard 
                                        key={o._src + (o["è¨‚å–®ç·¨è™Ÿ"] || o["__row__"])} 
                                        order={o} config={CONFIG} findVal={findVal} handleUpdate={handleUpdate} 
                                        isSyncing={syncingIds.has(o._src + (o["è¨‚å–®ç·¨è™Ÿ"] || o["__row__"]))}
                                    />
                                ))
                            )}
                        </div>
                    </main>

                    {toast && <div className="fixed bottom-10 left-1/2 -translate-x-1/2 px-10 py-4 rounded-full shadow-2xl z-[300] bg-slate-900 text-white text-sm font-black animate-bounce">{toast}</div>}
                    {loading && <div className="fixed inset-0 bg-white/40 backdrop-blur-md flex flex-col items-center justify-center z-[500]"><div className="w-12 h-12 border-4 border-emerald-600 border-t-transparent rounded-full animate-spin"></div></div>}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¨‚å–®ç¢ºèªç™¼é€å™¨ | MILU Admin</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&family=Playfair+Display:ital,wght@0,600;1,600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        milu: { gold: '#C69C6D', dark: '#4A4A4A', green: '#10B981' }
                    },
                    fontFamily: {
                        serif: ['"Playfair Display"', 'serif'],
                        sans: ['"Noto Sans TC"', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #f3f4f6; color: #4A4A4A; padding: 20px; }
        .card { background: white; padding: 24px; border-radius: 16px; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); max-width: 500px; margin: 0 auto; }
        .input-group { margin-bottom: 16px; }
        .label { display: block; font-weight: 700; margin-bottom: 8px; font-size: 0.9rem; color: #374151; }
        .input { width: 100%; padding: 12px; border: 1px solid #d1d5db; border-radius: 8px; outline: none; font-size: 1rem; }
        .input:focus { border-color: #C69C6D; ring: 2px solid #C69C6D; }
        .btn { width: 100%; padding: 14px; background-color: #4A4A4A; color: white; border-radius: 12px; font-weight: bold; font-size: 1rem; margin-top: 10px; transition: all 0.2s; }
        .btn:active { transform: scale(0.98); background-color: #333; }
        .preview-title { text-align: center; font-family: 'Playfair Display', serif; color: #C69C6D; font-size: 1.5rem; margin-bottom: 20px; font-weight: bold; }
    </style>
</head>
<body>

    <div class="card">
        <div class="preview-title">Admin Confirm Tool</div>
        <p class="text-center text-xs text-gray-400 mb-6">è«‹è¼¸å…¥å®¢äººè³‡æ–™ï¼Œç™¼é€ç¢ºèªå¡ç‰‡</p>

        <form id="admin-form" onsubmit="return sendConfirmMessage(this)">
            
            <div class="input-group">
                <label class="label">å®¢äººå§“å</label>
                <input type="text" id="cust-name" class="input" placeholder="ä¾‹å¦‚ï¼šç‹å°ç¾" required>
            </div>

            <div class="input-group">
                <label class="label">æœå‹™é …ç›®</label>
                <select id="cust-service" class="input">
                    <option value="å°ˆäººä½ˆç½®">âœ¨ å°ˆäººä½ˆç½®</option>
                    <option value="æ°£çƒå¤–é€">ğŸšš æ°£çƒå¤–é€</option>
                    <option value="å¾Œè»Šå»‚é©šå–œ">ğŸš— å¾Œè»Šå»‚é©šå–œ</option>
                    <option value="å·¥ä½œå®¤è‡ªå–">ğŸ›ï¸ å·¥ä½œå®¤è‡ªå–</option>
                </select>
            </div>

            <div class="grid grid-cols-2 gap-4">
                <div class="input-group">
                    <label class="label">æ—¥æœŸ</label>
                    <input type="date" id="cust-date" class="input" required>
                </div>
                <div class="input-group">
                    <label class="label">æ™‚é–“</label>
                    <input type="time" id="cust-time" class="input" required>
                </div>
            </div>

            <div class="input-group">
                <label class="label">é‡‘é¡ (é¸å¡«)</label>
                <input type="text" id="cust-price" class="input" placeholder="ä¾‹å¦‚ï¼š$2,500 (å«é‹)">
            </div>

            <button type="submit" class="btn">
                ç™¼é€ã€Œé ç´„æˆåŠŸã€å¡ç‰‡ <i class="fa-solid fa-paper-plane"></i>
            </button>
        </form>
    </div>

    <script>
        // ä½¿ç”¨åŒä¸€å€‹ LIFF ID å³å¯ï¼Œå› ç‚ºæ˜¯åœ¨åŒä¸€å€‹ Channel ä¸‹
        const LIFF_ID = '2004044468-w8s4Ex1k'; 

        window.onload = function() {
            liff.init({ liffId: LIFF_ID })
                .then(() => {
                    console.log('LIFF initialized');
                    if (!liff.isLoggedIn()) {
                        liff.login();
                    }
                })
                .catch((err) => {
                    console.error(err);
                    Swal.fire('éŒ¯èª¤', 'LIFF åˆå§‹åŒ–å¤±æ•—', 'error');
                });
        };

        function sendConfirmMessage(form) {
            // é˜²æ­¢è¡¨å–®è·³è½‰
            event.preventDefault();

            const name = document.getElementById('cust-name').value;
            const service = document.getElementById('cust-service').value;
            const date = document.getElementById('cust-date').value;
            const time = document.getElementById('cust-time').value;
            const price = document.getElementById('cust-price').value || '-';

            if (!liff.isInClient()) {
                Swal.fire('è«‹åœ¨ LINE å…§é–‹å•Ÿ', 'æ­¤åŠŸèƒ½å¿…é ˆåœ¨ LINE èŠå¤©å®¤ä¸­é–‹å•Ÿé€£çµæ‰èƒ½ç™¼é€è¨Šæ¯ã€‚', 'warning');
                return false;
            }

            // ç™¼é€ç¢ºèªå¡ç‰‡ (Flex Message)
            liff.sendMessages([{
                type: 'flex',
                altText: 'âœ… æ‚¨çš„é ç´„å·²ç¢ºèªæˆåŠŸï¼',
                contents: {
                    "type": "bubble",
                    "size": "mega",
                    "body": {
                        "type": "box",
                        "layout": "vertical",
                        "contents": [
                            {
                                "type": "text",
                                "text": "PAYMENT CONFIRMED",
                                "weight": "bold",
                                "color": "#10B981", // ç¶ è‰²
                                "size": "xs",
                                "align": "center",
                                "letterSpacing": "1px"
                            },
                            {
                                "type": "text",
                                "text": "é ç´„ç¢ºèªæˆåŠŸ",
                                "weight": "bold",
                                "size": "xl",
                                "margin": "md",
                                "align": "center",
                                "color": "#4A4A4A"
                            },
                            {
                                "type": "text",
                                "text": "æˆ‘å€‘å·²æ”¶åˆ°æ‚¨çš„æ¬¾é …ï¼ŒæœŸå¾…ç‚ºæ‚¨æœå‹™ï¼",
                                "size": "xs",
                                "color": "#aaaaaa",
                                "wrap": true,
                                "align": "center",
                                "margin": "sm"
                            },
                            {
                                "type": "separator",
                                "margin": "xxl"
                            },
                            {
                                "type": "box",
                                "layout": "vertical",
                                "margin": "xxl",
                                "spacing": "sm",
                                "contents": [
                                    {
                                        "type": "box",
                                        "layout": "horizontal",
                                        "contents": [
                                            { "type": "text", "text": "å§“å", "size": "sm", "color": "#999999", "flex": 0 },
                                            { "type": "text", "text": name, "size": "sm", "color": "#111111", "align": "end", "weight": "bold" }
                                        ]
                                    },
                                    {
                                        "type": "box",
                                        "layout": "horizontal",
                                        "contents": [
                                            { "type": "text", "text": "é …ç›®", "size": "sm", "color": "#999999", "flex": 0 },
                                            { "type": "text", "text": service, "size": "sm", "color": "#111111", "align": "end" }
                                        ]
                                    },
                                    {
                                        "type": "box",
                                        "layout": "horizontal",
                                        "contents": [
                                            { "type": "text", "text": "æ—¥æœŸ", "size": "sm", "color": "#999999", "flex": 0 },
                                            { "type": "text", "text": date, "size": "sm", "color": "#111111", "align": "end" }
                                        ]
                                    },
                                    {
                                        "type": "box",
                                        "layout": "horizontal",
                                        "contents": [
                                            { "type": "text", "text": "æ™‚é–“", "size": "sm", "color": "#999999", "flex": 0 },
                                            { "type": "text", "text": time, "size": "sm", "color": "#111111", "align": "end" }
                                        ]
                                    }
                                ]
                            },
                            {
                                "type": "box",
                                "layout": "vertical",
                                "margin": "lg",
                                "contents": [
                                    { "type": "separator" }
                                ]
                            },
                            {
                                "type": "box",
                                "layout": "horizontal",
                                "margin": "lg",
                                "contents": [
                                    { "type": "text", "text": "ç¢ºèªé‡‘é¡", "size": "sm", "color": "#999999" },
                                    { "type": "text", "text": price, "size": "md", "color": "#C69C6D", "align": "end", "weight": "bold" }
                                ]
                            },
                            {
                                "type": "box",
                                "layout": "vertical",
                                "margin": "xxl",
                                "contents": [
                                    {
                                        "type": "image",
                                        "url": "https://scdn.line-apps.com/n/channel_devcenter/img/fx/review_gold_star_28.png", // é€™è£¡æš«ç”¨æ˜Ÿæ˜Ÿï¼Œä½ å¯ä»¥æ›æˆè‡ªå·±çš„ Logo
                                        "size": "xxs",
                                        "aspectMode": "fit"
                                    },
                                    {
                                        "type": "text",
                                        "text": "MILU BALLOONS",
                                        "size": "xxxs",
                                        "color": "#dddddd",
                                        "align": "center",
                                        "margin": "xs",
                                        "letterSpacing": "2px"
                                    }
                                ]
                            }
                        ]
                    }
                }
            }]).then(() => {
                Swal.fire({
                    title: 'ç™¼é€æˆåŠŸï¼',
                    icon: 'success',
                    timer: 1500,
                    showConfirmButton: false
                }).then(() => {
                    liff.closeWindow();
                });
            }).catch((err) => {
                console.log('error', err);
                Swal.fire('ç™¼é€å¤±æ•—', 'è«‹ç¢ºèªæ‚¨æ˜¯åœ¨èˆ‡å®¢äººçš„èŠå¤©å®¤ä¸­æ‰“é–‹æ­¤é€£çµ', 'error');
            });
            
            return false;
        }
    </script>
</body>
</html>

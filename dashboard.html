<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MILU é ç´„ç®¡ç†å¾Œå°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&family=Playfair+Display:ital,wght@0,600;1,600&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: { milu: { gold: '#C69C6D', dark: '#4A4A4A', beige: '#F9F7F2' } }
                }
            }
        }
    </script>
    <style>
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #f3f4f6; color: #4A4A4A; height: 100vh; overflow: hidden; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .card-shadow { box-shadow: 0 4px 20px rgba(0,0,0,0.05); }
        .active-item { background-color: #FDFbf7; border-left: 4px solid #C69C6D; }
        [v-cloak] { display: none; }
        .debug-modal pre { white-space: pre-wrap; word-wrap: break-word; font-size: 11px; color: #333; max-height: 400px; overflow-y: auto; background: #f1f1f1; padding: 15px; border-radius: 5px; text-align: left; }
        .price-input:focus { border-color: #C69C6D; background-color: #fff; }
        .edit-input { width: 100%; border-bottom: 1px solid #ddd; background: transparent; padding: 2px 0; font-weight: bold; color: #4A4A4A; }
        
        /* è‡ªå®šç¾© SweetAlert æŒ‰éˆ•æ¨£å¼ */
        .swal2-confirm { background-color: #10B981 !important; } 
        .swal2-deny { background-color: #6B7280 !important; }

        .calendar-selected { background-color: #C69C6D !important; color: white !important; }
    </style>
</head>
<body id="app" v-cloak>

    <div class="flex h-full">
        <!-- å·¦å´å´é‚Šæ¬„ -->
        <aside class="flex flex-col bg-slate-50 border-r border-slate-200 z-30 transition-all duration-300 relative shrink-0 shadow-sm"
               :class="[selectedOrder ? 'hidden md:flex w-80 lg:w-96' : 'w-full md:w-80 lg:w-96']">
            
            <!-- é ‚éƒ¨æ¨™é¡Œèˆ‡æœå°‹ -->
            <div class="p-5 bg-white space-y-4">
                <div class="flex items-center justify-between">
                    <div>
                        <h1 class="text-2xl font-black text-milu-gold tracking-tight italic flex items-center gap-2">
                            MILU <span class="text-slate-400 font-normal text-xs not-italic uppercase tracking-widest border-l pl-2 border-slate-200">Admin</span>
                        </h1>
                        <p class="text-[10px] text-slate-400 mt-0.5">æœ€å¾Œæ›´æ–°: {{ lastUpdated || 'è¼‰å…¥ä¸­...' }}</p>
                    </div>
                    <button @click="fetchData" class="w-10 h-10 flex items-center justify-center rounded-xl bg-slate-50 text-slate-400 hover:text-milu-gold hover:bg-milu-gold/5 transition-all" :class="{'animate-spin': loading}">
                        <i class="fa-solid fa-rotate text-sm"></i>
                    </button>
                </div>
                
            </div>

            <!-- æ—¥æ›†æ¨¡çµ„ (æœå°‹æ™‚éš±è—) -->
            <div class="px-5 pb-5 pt-2 bg-white border-b border-slate-100" v-if="!searchQuery">
                <div class="flex justify-between items-center mb-3">
                    <h3 class="font-bold text-sm text-slate-700 flex items-center gap-2">
                        <i class="fa-regular fa-calendar text-milu-gold"></i>
                        {{ currentMonthYear }}
                    </h3>
                    <div class="flex gap-1">
                        <button @click="changeMonth(-1)" class="p-1.5 hover:bg-slate-100 rounded-lg text-slate-400 transition-colors"><i class="fa-solid fa-chevron-left text-xs"></i></button>
                        <button @click="changeMonth(1)" class="p-1.5 hover:bg-slate-100 rounded-lg text-slate-400 transition-colors"><i class="fa-solid fa-chevron-right text-xs"></i></button>
                    </div>
                </div>
                
                <div class="grid grid-cols-7 gap-1 text-center text-[10px] font-bold text-slate-300 mb-2 uppercase tracking-tighter">
                    <div v-for="d in ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']" :key="d">{{d}}</div>
                </div>
                
                <div class="grid grid-cols-7 gap-1">
                    <div v-for="(day, idx) in calendarDays" :key="idx" 
                         @click="day.dateStr && (filterDate = (filterDate === day.dateStr ? '' : day.dateStr))"
                         class="h-8 rounded-lg flex flex-col items-center justify-center cursor-pointer relative calendar-day group"
                         :class="[
                             !day.dateStr ? 'pointer-events-none opacity-20' : '',
                             filterDate === day.dateStr ? 'calendar-selected shadow-lg scale-105 z-10' : 'hover:bg-slate-50 text-slate-600'
                         ]">
                        <span class="text-[11px] font-bold">{{ day.dayNum }}</span>
                        <!-- è¨‚å–®åœ“é»æŒ‡ç¤ºå™¨ -->
                        <div v-if="day.hasOrder" class="absolute bottom-1 w-1 h-1 rounded-full" 
                             :class="filterDate === day.dateStr ? 'bg-white' : 'bg-milu-gold'"></div>
                    </div>
                </div>
                
                <div v-if="filterDate" class="mt-4 flex items-center justify-between bg-milu-gold/5 p-2 rounded-xl border border-milu-gold/10">
                    <span class="text-[10px] font-bold text-milu-gold flex items-center gap-1.5">
                        <i class="fa-solid fa-filter text-[9px]"></i> {{ filterDate }} é ç´„
                    </span>
                    <button @click="filterDate = ''" class="text-[10px] text-slate-400 hover:text-red-500 font-bold underline transition-colors">æ¸…é™¤</button>
                </div>
            </div>

            <!-- ç‹€æ…‹å¿«é€Ÿç¯©é¸é ç±¤ -->
            <div class="flex p-3 gap-2 bg-slate-50 border-b border-slate-200 shrink-0 overflow-x-auto no-scrollbar">
                <button v-for="opt in [{k:'ALL', n:'å…¨éƒ¨'}, {k:'UNPAID', n:'å¾…ä»˜æ¬¾'}, {k:'CONFIRMED', n:'å·²ä»˜æ¬¾'}]" 
                        :key="opt.k"
                        @click="filter = opt.k" 
                        :class="filter === opt.k ? 'bg-milu-gold text-white shadow-md' : 'bg-white text-slate-500 hover:bg-white/80'" 
                        class="flex-1 py-2 px-3 text-xs font-bold rounded-xl transition-all whitespace-nowrap border border-transparent">
                    {{ opt.n }}
                </button>
            </div>

            <!-- è¨‚å–®åˆ—è¡¨å€åŸŸ -->
            <div class="flex-1 overflow-y-auto p-4 space-y-3 bg-slate-50 no-scrollbar">
                <!-- ç„¡è³‡æ–™ç‹€æ…‹ -->
                <div v-if="filteredList.length === 0" class="flex flex-col items-center justify-center py-20 text-slate-400 space-y-2">
                    <div class="w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mb-2">
                        <i class="fa-regular fa-folder-open text-2xl opacity-40"></i>
                    </div>
                    <p class="text-sm font-medium">æ²’æœ‰æ‰¾åˆ°ä»»ä½•è¨‚å–®</p>
                    <button @click="clearFilters" class="text-xs text-milu-gold underline font-bold">é‡è¨­ç¯©é¸æ¢ä»¶</button>
                </div>

                <!-- è¨‚å–®åˆ—è¡¨ -->
                <div v-for="order in filteredList" :key="order.oid" @click="selectOrder(order)" 
                     class="p-4 rounded-xl cursor-pointer transition-all bg-white border border-transparent hover:border-gray-200 card-shadow"
                     :class="{'active-item': selectedOrder && selectedOrder.oid === order.oid}">
                    
                    <div class="flex justify-between items-start mb-2">
                        <span class="text-xs font-mono text-gray-400 bg-gray-100 px-1 rounded">#{{ order.oid }}</span>
                        <span class="text-[10px] px-2 py-1 rounded-full font-bold"
                              :class="{
                                  'bg-green-100 text-green-600': order.status === 'CONFIRMED',
                                  'bg-red-100 text-red-500': order.status === 'UNPAID',
                                  'bg-gray-200 text-gray-600': order.status === 'CANCELED',
                                  'bg-yellow-100 text-yellow-600': order.status === 'REFUNDED',
                                  'bg-blue-100 text-blue-600': order.status === 'COMPLETED',
                                  'bg-blue-400 text-white': order.status === 'WAITING_PAYMENT'
                              }">
                            {{ getStatusText(order.status) }}
                        </span>
                    </div>
                    <div class="flex justify-between items-center">
                        <h3 class="font-bold text-gray-800">
                            <span v-html="highlightText(order.contactName)"></span>
                        </h3>
                        <span class="text-xs text-gray-400">{{ order.service }}</span>
                    </div>
                    <div class="flex items-center text-xs text-gray-500 mt-2 gap-3">
                        <span class="flex items-center gap-1">ğŸ“… {{ order.date }}</span>
                        <span class="flex items-center gap-1">â° {{ order.time }}</span>
                    </div>
                    
                    <!-- å°¾æ¬¾æ¬„ä½é¡¯ç¤º (ä¿®æ­£éœ€æ±‚) -->
                    <div class="mt-2 pt-2 border-t border-gray-100 flex justify-between items-center" v-if="order.status !== 'CANCELED' && order.status !== 'COMPLETED'">
                        <span class="text-[10px] text-gray-400">ç¸½é¡: NT$ {{ formatMoney(order.rawPrice) }}</span>
                        <span class="text-[11px] font-bold" :class="(order.rawPrice - order.receivedPrice) > 0 ? 'text-red-500' : 'text-green-600'">
                            <template v-if="order.rawPrice > 0">
                                <span v-if="(order.rawPrice - order.receivedPrice) > 0">
                                    å°šæ¬ : NT$ {{ formatMoney(order.rawPrice - order.receivedPrice) }}
                                </span>
                                <span v-else>å·²ä»˜æ¸…</span>
                            </template>
                            <template v-else>å¾…å ±åƒ¹</template>
                        </span>
                    </div>
                </div>
            </div>
            
            <!-- éŒ¯èª¤è¨Šæ¯æç¤º -->
            <div v-if="errorMsg" class="p-3 bg-red-50 text-red-500 text-[11px] border-t border-red-100 flex items-start gap-2">
                <i class="fa-solid fa-circle-exclamation mt-0.5"></i>
                <span>{{ errorMsg }}</span>
            </div>
        </aside>

        <!-- å³å´è©³æƒ… -->
        <div class="w-full md:w-2/3 bg-[#F9F9F9] flex flex-col relative h-full" :class="{'hidden md:flex': !selectedOrder}">
            
            <div class="md:hidden absolute top-4 left-4 z-20">
                <button @click="selectedOrder = null" class="bg-white p-2 rounded-full shadow text-gray-500">â¬…</button>
            </div>

            <div v-if="selectedOrder" class="flex-1 overflow-y-auto relative">
                <div class="min-h-full flex flex-col items-center justify-center p-4 md:p-10 py-16 md:py-10">
                    <div class="bg-white rounded-3xl shadow-xl border border-gray-100 overflow-hidden w-full max-w-md mx-auto">
                    
                        <div class="h-28 flex items-center justify-center transition-colors duration-300 relative"
                             :class="{
                                  'bg-[#10B981]': selectedOrder.status === 'CONFIRMED',
                                  'bg-[#EF4444]': selectedOrder.status === 'UNPAID',
                                  'bg-gray-500': selectedOrder.status === 'CANCELED',
                                  'bg-yellow-500': selectedOrder.status === 'REFUNDED',
                                  'bg-blue-500': selectedOrder.status === 'COMPLETED',
                                  'bg-blue-400': selectedOrder.status === 'WAITING_PAYMENT'
                             }">
                            
                            <!-- ç·¨è¼¯æ¨¡å¼æŒ‰éˆ•å€ -->
                            <button v-if="!isEditing" @click="startEdit" class="absolute top-4 right-4 bg-white/20 hover:bg-white/30 text-white p-2 rounded-full transition backdrop-blur-sm" title="ç·¨è¼¯è³‡æ–™">
                                <i class="fa-solid fa-pen"></i>
                            </button>
                            <div v-else class="absolute top-4 right-4 flex items-center gap-2">
                                <button @click="saveEdit" class="bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded-lg text-sm shadow font-bold flex items-center gap-1">
                                    <i class="fa-solid fa-floppy-disk"></i> å„²å­˜
                                </button>
                                <button @click="cancelEdit" class="bg-white/20 hover:bg-white/30 text-white px-3 py-1 rounded-lg text-sm backdrop-blur-sm">
                                    å–æ¶ˆ
                                </button>
                            </div>

                            <div class="text-center text-white">
                                <div class="text-4xl mb-1">
                                    <i v-if="selectedOrder.status === 'CONFIRMED'" class="fa-solid fa-circle-check"></i>
                                    <i v-else-if="selectedOrder.status === 'CANCELED'" class="fa-solid fa-circle-xmark"></i>
                                    <i v-else-if="selectedOrder.status === 'REFUNDED'" class="fa-solid fa-money-bill-transfer"></i>
                                    <i v-else-if="selectedOrder.status === 'COMPLETED'" class="fa-solid fa-flag-checkered"></i>
                                    <i v-else-if="selectedOrder.status === 'WAITING_PAYMENT'" class="fa-solid fa-hourglass-half"></i>
                                    <i v-else class="fa-solid fa-circle-exclamation"></i>
                                </div>
                                <h2 class="text-lg font-bold tracking-widest opacity-90">
                                    {{ getStatusText(selectedOrder.status, true) }}
                                </h2>
                            </div>
                        </div>

                        <div class="p-8 space-y-6 relative">
                            <div v-if="isEditing" class="absolute top-0 left-0 w-full h-1 bg-yellow-400 animate-pulse"></div>

                            <!-- å®¢æˆ¶è³‡è¨Š -->
                            <div class="flex justify-between border-b border-gray-100 pb-4">
                                <div class="flex-1 mr-4">
                                    <p class="text-xs text-gray-400 mb-1">CUSTOMER</p>
                                    <div v-if="isEditing">
                                        <label class="text-[10px] text-gray-400">LINEåç¨±</label>
                                        <input v-model="editForm.lineName" class="edit-input text-sm mb-1" placeholder="LINEåç¨±">
                                        <label class="text-[10px] text-gray-400">è¯çµ¡äººå§“å</label>
                                        <input v-model="editForm.contactName" class="edit-input text-xl mb-1" placeholder="è¯çµ¡äººå§“å">
                                        <label class="text-[10px] text-gray-400">é›»è©±</label>
                                        <input v-model="editForm.phone" class="edit-input text-sm" placeholder="é›»è©±">
                                    </div>
                                    <div v-else>
                                        <p class="text-xl text-gray-400 font-bold mb-1 flex items-center gap-2">
                                            <i class="fa-brands fa-line text-green-500 text-xl"></i> {{ selectedOrder.lineName }}
                                        </p>
                                        <p class="font-bold text-2xl text-gray-800">{{ selectedOrder.contactName }}</p>
                                        <p class="text-sm text-gray-600 mt-2 flex items-center gap-1">
                                            <i class="fa-solid fa-phone text-xs"></i> {{ selectedOrder.phone }}
                                        </p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <p class="text-xs text-gray-400 mb-1">SERVICE</p>
                                    <p class="font-bold text-lg text-milu-gold">{{ selectedOrder.service }}</p>
                                </div>
                            </div>

                            <!-- æ™‚é–“æ—¥æœŸ -->
                            <div class="grid grid-cols-2 gap-4">
                                <div class="bg-gray-50 p-3 rounded-xl border border-gray-100">
                                    <p class="text-xs text-gray-400 mb-1">DATE</p>
                                    <input v-if="isEditing" type="date" v-model="editForm.date" class="edit-input">
                                    <p v-else class="font-bold text-gray-700">{{ selectedOrder.date }}</p>
                                </div>
                                <div class="bg-gray-50 p-3 rounded-xl border border-gray-100">
                                    <p class="text-xs text-gray-400 mb-1">{{ getLabel('time', selectedOrder.service) }}</p>
                                    <template v-if="isEditing">
                                        <select v-if="isTimeSlotService(selectedOrder.service)" v-model="editForm.time" class="edit-input">
                                            <option value="" disabled>è«‹é¸æ“‡æ™‚æ®µ</option>
                                            <option v-for="slot in timeSlots" :key="slot" :value="slot">{{ slot }}</option>
                                        </select>
                                        <input v-else type="time" v-model="editForm.time" class="edit-input">
                                    </template>
                                    <p v-else class="font-bold text-gray-700">{{ selectedOrder.time }}</p>
                                </div>
                            </div>
                            
                            <!-- æ¬¾é …æ˜ç´° -->
                            <div class="bg-yellow-50/50 p-4 rounded-xl border border-yellow-100 space-y-3">
                                <div class="flex justify-between items-center">
                                    <p class="text-xs text-gray-500 font-bold">ç¸½é‡‘é¡ (å¡«å…¥å ±åƒ¹)</p>
                                    <div class="flex items-center">
                                        <span class="text-xs mr-1 text-gray-400">NT$</span>
                                        <input type="number" v-model.number="displayRawPrice" 
                                               @focus="handlePriceFocus"
                                               class="price-input font-bold text-lg text-gray-800 bg-transparent border-b border-gray-300 w-24 text-right focus:outline-none" 
                                               placeholder="0">
                                    </div>
                                </div>
                                <div class="flex justify-between items-center mb-2">
                                    <p class="text-xs text-green-600 font-bold">å·²æ”¶æ¬¾ (å°å¸³)</p>
                                    <div class="flex items-center gap-2">
                                        <button @click="fillFullPayment" class="text-[10px] bg-green-100 text-green-700 px-2 py-1 rounded hover:bg-green-200 transition">
                                            âš¡åŒä¸Š
                                        </button>
                                        <span class="text-xs mr-1 text-green-600">NT$</span>
                                        <input type="number" v-model.number="displayReceivedPrice" 
                                               @focus="handlePriceFocus"
                                               class="price-input font-bold text-lg text-green-600 bg-transparent border-b border-green-200 w-24 text-right focus:outline-none" 
                                               placeholder="0">
                                    </div>
                                </div>
                                <div class="border-t pt-2 flex justify-between items-center border-yellow-200">
                                    <p class="text-xs text-red-500 font-bold">å°šæ¬ å°¾æ¬¾</p>
                                    <p class="font-bold text-xl text-red-500">
                                        NT$ {{ formatMoney(displayRawPrice - displayReceivedPrice) }}
                                    </p>
                                </div>
                            </div>
                            
                            <!-- åœ°å€ -->
                            <div class="bg-gray-50 p-3 rounded-xl border border-gray-100">
                                 <p class="text-xs text-gray-400 mb-1">{{ getLabel('location', selectedOrder.service) }}</p>
                                 <input v-if="isEditing" type="text" v-model="editForm.location" class="edit-input">
                                 <p v-else class="font-bold text-gray-600 text-sm break-words">{{ selectedOrder.location }}</p>
                            </div>

                            <!-- å‹•ä½œæŒ‰éˆ• -->
                            <div v-if="!isEditing" class="pt-2 space-y-3">
                                <button v-if="selectedOrder.status === 'UNPAID'" @click="updateOrderStatus('PAYMENT_REQUEST')" class="w-full bg-blue-500 hover:bg-blue-600 text-white py-3.5 rounded-xl font-bold transition shadow-lg flex items-center justify-center gap-2">
                                    <i class="fa-solid fa-envelope mr-1"></i> (é¸ç”¨) ç™¼é€ä»˜æ¬¾é ˆçŸ¥ & å¸³è™Ÿ
                                </button>

                                <button v-if="selectedOrder.status === 'UNPAID' || selectedOrder.status === 'WAITING_PAYMENT'" @click="updateOrderStatus('CONFIRM')" class="w-full bg-[#10B981] hover:bg-green-700 text-white py-4 rounded-xl font-bold text-lg transition shadow-lg active:scale-95 flex items-center justify-center gap-2">
                                    <i class="fa-solid fa-check-circle"></i> ç¢ºèªæ”¶æ¬¾ä¸¦ç™»è¨˜
                                </button>
                                
                                <div v-if="selectedOrder.status === 'CONFIRMED'" class="space-y-2">
                                    <button @click="updateOrderStatus('COMPLETE')" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-3.5 rounded-xl font-bold transition shadow-lg active:scale-95 flex items-center justify-center gap-2">
                                        <i class="fa-solid fa-flag-checkered"></i> å®Œæˆè¨‚å–® (çµæ¡ˆ)
                                    </button>
                                </div>

                                <div v-if="selectedOrder.status === 'COMPLETED' || selectedOrder.status === 'CANCELED' || selectedOrder.status === 'REFUNDED'" class="space-y-3">
                                    <div class="text-center py-3 bg-gray-100 text-gray-500 rounded-xl font-bold border border-gray-200">
                                        æ­¤è¨‚å–®å·²çµæ¡ˆ ({{ getStatusText(selectedOrder.status) }})
                                    </div>
                                    <button @click="updateOrderStatus('RESTORE')" class="w-full bg-gray-500 hover:bg-gray-600 text-white py-3 rounded-xl font-bold transition shadow active:scale-95 flex items-center justify-center gap-2">
                                        <i class="fa-solid fa-rotate-left"></i> æ¢å¾©è¨‚å–® (é‡è¨­ç‚ºæœªä»˜æ¬¾)
                                    </button>
                                </div>

                                <div class="flex gap-2" v-if="selectedOrder.status !== 'CANCELED' && selectedOrder.status !== 'REFUNDED' && selectedOrder.status !== 'COMPLETED'">
                                    <button v-if="selectedOrder.status === 'CONFIRMED'" @click="updateOrderStatus('REFUND')" class="flex-1 bg-yellow-500 hover:bg-yellow-600 text-white py-3 rounded-xl font-bold transition flex items-center justify-center gap-2 shadow active:scale-95">
                                        <i class="fa-solid fa-money-bill-transfer"></i> è¾¦ç†é€€æ¬¾
                                    </button>
                                    <button @click="updateOrderStatus('CANCEL')" class="flex-1 bg-gray-400 hover:bg-gray-500 text-white py-3 rounded-xl font-bold transition flex items-center justify-center gap-2 shadow active:scale-95">
                                        <i class="fa-solid fa-ban"></i> å–æ¶ˆè¨‚å–®
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div v-else class="flex-1 flex items-center justify-center text-gray-400">
                <p>è«‹å¾å·¦å´é¸æ“‡ä¸€ç­†è¨‚å–®æŸ¥çœ‹è©³æƒ…</p>
            </div>
        </div>
    </div>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <script>
        const { createApp, ref, computed, onMounted } = Vue;

        const configMap = {
            'å°ˆäººä½ˆç½®': { time: 'é€²å ´ä½ˆç½®æ™‚é–“', location: 'ä½ˆç½®åœ°å€', icon: 'âœ¨' },
            'å·¥ä½œå®¤å–è²¨': { time: 'å–è²¨æ™‚é–“', location: 'å–è²¨é–€å¸‚', icon: 'ğŸ›’' },
            'å¾Œè»Šå»‚ä½ˆç½®': { time: 'æŠµé”æ™‚é–“', location: 'æ–½ä½œåœ°é»', icon: 'ğŸš—' },
            'æ°£çƒå¤–é€': { time: 'å¤–é€æ™‚æ®µ', location: 'å¤–é€åœ°å€', icon: 'ğŸšš' }
        };

        const timeSlots = [
            "12:30 - 13:30", "13:00 - 14:00", "14:00 - 15:00", "15:00 - 16:00", 
            "16:00 - 17:00", "17:00 - 18:00", "18:00 - 19:00"
        ];

        createApp({
            setup() {
                const DATA_API_URL = 'https://script.google.com/macros/s/AKfycbwfAyj7ktWXv4gPoFo7wVPLn1_nQ6w0hX8kTToggetxt3jqqD7yp67cxlrg5l1N1rsLaA/exec'; 
                const SEND_MSG_WEBHOOK = 'https://hook.eu1.make.com/63u0kheb71v9vengzdggfy1ga7r8gmng';

                const reservations = ref([]);
                const selectedOrder = ref(null);
                const isEditing = ref(false);
                const editForm = ref({});
                const filter = ref('ALL');
                
                const searchQuery = ref('');
                const filterDate = ref('');
                const filterService = ref('');

                const loading = ref(true);
                const errorMsg = ref(null);
                const rawJsonData = ref(null);
                const lastUpdated = ref(null);

                // --- æ—¥æ›†é‚è¼¯å¯¦ä½œ ---
                const viewDate = ref(new Date());
                const currentMonthYear = computed(() => {
                    return `${viewDate.value.getFullYear()}å¹´ ${viewDate.value.getMonth() + 1}æœˆ`;
                });
                const calendarDays = computed(() => {
                    const year = viewDate.value.getFullYear();
                    const month = viewDate.value.getMonth();
                    const firstDay = new Date(year, month, 1).getDay();
                    const lastDate = new Date(year, month + 1, 0).getDate();
                    const days = [];
                    // å¡«è£œæœˆåˆç©ºç™½
                    for (let i = 0; i < firstDay; i++) days.push({ dayNum: '', dateStr: '' });
                    // å¡«å¯«æ—¥æœŸ
                    for (let d = 1; d <= lastDate; d++) {
                        const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(d).padStart(2, '0')}`;
                        const hasOrder = reservations.value.some(r => r.date === dateStr);
                        days.push({ dayNum: d, dateStr, hasOrder });
                    }
                    return days;
                });
                const changeMonth = (delta) => {
                    const d = new Date(viewDate.value);
                    d.setMonth(d.getMonth() + delta);
                    viewDate.value = d;
                };

                // --- ä¿æŒåŸæœ¬å…¬å¼èˆ‡é‚è¼¯ ---
                const safeText = (text) => (text && String(text).trim() !== '') ? String(text) : ' ';
                const formatMoney = (val) => (!val && val !== 0) ? '0' : val.toLocaleString();
                const parseMoney = (val) => {
                    if (!val) return 0;
                    const str = String(val).replace(/[^\d.-]/g, '');
                    return parseInt(str) || 0;
                };

                const isTimeSlotService = (service) => service.includes('å¤–é€') || service.includes('è‡ªå–') || service.includes('å–è²¨');

                const displayRawPrice = computed({
                    get: () => isEditing.value ? editForm.value.rawPrice : (selectedOrder.value ? selectedOrder.value.rawPrice : 0),
                    set: (val) => {
                        if (isEditing.value) editForm.value.rawPrice = val;
                        else if (selectedOrder.value) selectedOrder.value.rawPrice = val;
                    }
                });

                const displayReceivedPrice = computed({
                    get: () => isEditing.value ? editForm.value.receivedPrice : (selectedOrder.value ? selectedOrder.value.receivedPrice : 0),
                    set: (val) => {
                        if (isEditing.value) editForm.value.receivedPrice = val;
                        else if (selectedOrder.value) selectedOrder.value.receivedPrice = val;
                    }
                });

                const fillFullPayment = () => {
                    if (isEditing.value) editForm.value.receivedPrice = editForm.value.rawPrice;
                    else if (selectedOrder.value) selectedOrder.value.receivedPrice = selectedOrder.value.rawPrice;
                };

                const calculateDaysDiff = (dateStr) => {
                    if (!dateStr) return 0;
                    const targetDate = new Date(dateStr);
                    const today = new Date();
                    targetDate.setHours(0, 0, 0, 0);
                    today.setHours(0, 0, 0, 0);
                    return Math.ceil((targetDate - today) / (1000 * 60 * 60 * 24));
                };

                const getPaymentMessage = (type, dateStr) => {
                    const diffDays = calculateDaysDiff(dateStr);
                    const rules = {
                        DECO_NORMAL: "1. å–®ä¸€æ™‚æ®µåƒ…æœå‹™ä¸€çµ„å®¢äººï¼Œä»¥å…ˆæ”¯ä»˜è¨‚é‡‘è€…å„ªå…ˆã€‚\n2. åŒ¯æ¬¾æœŸé™ï¼šè«‹æ–¼ä¸‰æ—¥å…§å®ŒæˆåŒ¯æ¬¾ã€‚\n3. è¨‚é‡‘è¦å‰‡ï¼šå¯ä»˜å…¨é¡æˆ– 50% è¨‚é‡‘ï¼Œå°¾æ¬¾æ–¼æ´»å‹•ç•¶æ—¥æ”¯ä»˜ã€‚\n4. æ”¹æœŸèˆ‡å–æ¶ˆï¼šåƒ…æ¥å—ä¸€æ¬¡æ”¹æœŸï¼›å€‹äººå› ç´ å–æ¶ˆæ”¶ 30% æœå‹™è²»ã€‚",
                        DECO_URGENT: "âš ï¸ 3æ—¥å…§æ€¥å–®å°ˆç”¨è¦å‰‡\n1. è«‹æ–¼é ç´„æ™‚ã€Œæ”¯ä»˜å…¨é¡æ¬¾é …ã€ä¸¦æˆªåœ–å›å‚³ã€‚\n2. é ç´„å‰ 5 å°æ™‚æœªæ”¶æ¬¾è¦–ç‚ºæœªæˆç«‹ã€‚\n3. 24å°æ™‚å…§æ€¥ä»¶éœ€åŠ æ”¶ $500ã€‚\n4. å–æ¶ˆä¸é€€é‚„ä»»ä½•æ¬¾é …ã€‚",
                        SIMPLE: "1. è«‹æ–¼é ç´„ç•¶ä¸‹ã€Œæ”¯ä»˜å…¨é¡æ¬¾é …ã€ä¸¦æˆªåœ–å›å‚³ã€‚\n2. é ç´„å‰ 24 å°æ™‚æœªæ”¶æ¬¾è¦–ç‚ºæœªæˆç«‹ã€‚\n3. æ€¥ä»¶åŠ æ”¶ $500ã€‚\n4. 24å°æ™‚å…§å–æ¶ˆä¸é€€æ¬¾ã€‚"
                    };
                    if (type.includes('ä½ˆç½®') || type.includes('å¾Œè»Šå»‚')) return diffDays <= 3 ? rules.DECO_URGENT : rules.DECO_NORMAL;
                    return rules.SIMPLE;
                };

                const formatForLine = (htmlText) => {
                    if (!htmlText) return "ç„¡";
                    return htmlText.replace(/<br\s*\/?>/gi, '\n').replace(/<\/p>/gi, '\n\n').replace(/<li>/gi, 'â€¢ ').replace(/<\/li>/gi, '\n').replace(/<[^>]+>/g, '').replace(/&nbsp;/g, ' ').trim();
                };

                const formatGASDate = (val) => {
                    if (!val) return '';
                    const s = String(val);
                    if (s.includes('T')) {
                        const d = new Date(s);
                        if (isNaN(d.getTime())) return s;
                        return `${d.getFullYear()}-${String(d.getMonth() + 1).padStart(2, '0')}-${String(d.getDate()).padStart(2, '0')}`;
                    }
                    return s;
                };

                const formatGASTime = (val) => {
                    if (!val) return '';
                    let s = String(val).trim();
                    if (s.includes(' - ') || s.includes('~')) return s;
                    if (s.includes('T') && (s.includes('1899') || s.includes('1900'))) {
                        const match = s.match(/T(\d{2}):(\d{2})/);
                        if (match) {
                            let totalMinutes = parseInt(match[1]) * 60 + parseInt(match[2]);
                            totalMinutes += 480; // UTC+8
                            totalMinutes -= 38;  // LMT Correction
                            while (totalMinutes < 0) totalMinutes += 1440;
                            while (totalMinutes >= 1440) totalMinutes -= 1440;
                            return `${String(Math.floor(totalMinutes / 60)).padStart(2, '0')}:${String(totalMinutes % 60).padStart(2, '0')}`;
                        }
                    }
                    const match = s.match(/^(\d{1,2}):(\d{2})(:(\d{2}))?$/);
                    if (match) return `${match[1].padStart(2, '0')}:${match[2]}`;
                    return s;
                };

                const fetchData = async () => {
                    if (isEditing.value) return;
                    loading.value = true; errorMsg.value = null;
                    try {
                        const res = await fetch(`${DATA_API_URL}?mode=api`);
                        const text = await res.text();
                        let data = JSON.parse(text);
                        data = data.filter(item => item[0] && item[3]);
                        rawJsonData.value = data;

                        const formattedData = data.map((item, index) => {
                            let serviceName = item[8] || 'æœå‹™';
                            if (serviceName.includes('è‡ªå–')) serviceName = 'å·¥ä½œå®¤å–è²¨'; 
                            else if (serviceName.includes('å¾Œè»Šå»‚')) serviceName = 'å¾Œè»Šå»‚ä½ˆç½®';
                            else if (serviceName.includes('å¤–é€')) serviceName = 'æ°£çƒå¤–é€';
                            else if (serviceName.includes('ä½ˆç½®')) serviceName = 'å°ˆäººä½ˆç½®';

                            const rawStatus = (item[10] || '').trim();
                            let status = 'UNPAID';
                            if ((rawStatus.includes('å·²') || rawStatus.includes('ç¢ºèª') || rawStatus.includes('OK')) && !(rawStatus.includes('æœª') || rawStatus.includes('å¾…'))) status = 'CONFIRMED';
                            if (rawStatus.includes('å–æ¶ˆ')) status = 'CANCELED';
                            if (rawStatus.includes('é€€æ¬¾')) status = 'REFUNDED';
                            if (rawStatus.includes('å®Œæˆ') || rawStatus.includes('çµæ¡ˆ')) status = 'COMPLETED';
                            if (rawStatus.includes('ç­‰å¾…') || rawStatus.includes('é ˆçŸ¥')) status = 'WAITING_PAYMENT';

                            return {
                                id: index.toString(), 
                                oid: item[0], 
                                lineName: item[2] || 'æœªçŸ¥LINE', 
                                contactName: item[3] || 'æœªçŸ¥å®¢æˆ¶', 
                                phone: item[4] || '', 
                                service: serviceName, 
                                date: formatGASDate(item[5]), 
                                time: formatGASTime(item[6]), 
                                location: item[7] || 'æœªå¡«å¯«åœ°é»', 
                                userId: item[9] || '', 
                                status, 
                                rawPrice: parseMoney(item[11]), 
                                receivedPrice: parseMoney(item[12])
                            };
                        });
                        reservations.value = formattedData.sort((a, b) => new Date(b.date) - new Date(a.date));
                        
                        if (selectedOrder.value) {
                             const updated = formattedData.find(r => r.oid === selectedOrder.value.oid);
                             if (updated && !isEditing.value) Object.assign(selectedOrder.value, updated);
                        } else if (formattedData.length > 0 && window.innerWidth >= 768) {
                             selectedOrder.value = formattedData[0];
                        }
                        lastUpdated.value = new Date().toLocaleTimeString();
                    } catch (e) { errorMsg.value = e.message; }
                    loading.value = false;
                };

                const getStatusText = (status, isEnglish = false) => {
                    if (isEnglish) return status === 'CONFIRMED' ? 'PAYMENT CONFIRMED' : (status === 'COMPLETED' ? 'ORDER COMPLETED' : 'WAITING FOR PAYMENT');
                    const map = { 'CONFIRMED': 'å·²ä»˜æ¬¾', 'COMPLETED': 'å·²å®Œæˆ', 'CANCELED': 'å·²å–æ¶ˆ', 'REFUNDED': 'å·²é€€æ¬¾', 'WAITING_PAYMENT': 'ç­‰å¾…åŒ¯æ¬¾', 'UNPAID': 'æœªä»˜æ¬¾' };
                    return map[status] || 'æœªçŸ¥ç‹€æ…‹';
                };

                const getLabel = (type, service) => (configMap[service] || configMap['å°ˆäººä½ˆç½®'])[type];
                const selectOrder = (order) => { if(!isEditing.value) selectedOrder.value = order; };

                const filteredList = computed(() => {
                    let result = reservations.value;
                    if (filter.value === 'UNPAID') result = result.filter(r => r.status === 'UNPAID' || r.status === 'WAITING_PAYMENT');
                    else if (filter.value !== 'ALL') result = result.filter(r => r.status === filter.value);
                    if (searchQuery.value) {
                        const q = searchQuery.value.toLowerCase();
                        result = result.filter(r => r.contactName.toLowerCase().includes(q) || r.phone.includes(q) || r.lineName.toLowerCase().includes(q));
                    }
                    if (filterDate.value) result = result.filter(r => r.date === filterDate.value);
                    if (filterService.value) result = result.filter(r => r.service === filterService.value);
                    return result;
                });

                const clearFilters = () => { filterDate.value = ''; filterService.value = ''; filter.value = 'ALL'; searchQuery.value = ''; };
                
                const highlightText = (text) => {
                    if (!text || !searchQuery.value) return text || '';
                    const regex = new RegExp(`(${searchQuery.value})`, 'gi');
                    return text.replace(regex, '<span class="bg-yellow-200 text-black">$1</span>');
                };

                const buildRichFlexMessage = (order, actionType) => {
                    const config = configMap[order.service] || configMap['å°ˆäººä½ˆç½®'];
                    const total = parseInt(order.rawPrice) || 0;
                    const paid = parseInt(order.receivedPrice) || 0;
                    const balance = total - paid;
                    let titleText = 'PAYMENT CONFIRMED'; let descText = 'é ç´„èˆ‡æ¬¾é …å·²ç¢ºèª'; let statusColor = '#10B981';
                    let bodyContents = [];

                    if (actionType === 'CANCEL') { titleText = 'ORDER CANCELED'; descText = 'é ç´„å·²å–æ¶ˆ'; statusColor = '#EF4444'; }
                    else if (actionType === 'REFUND') { titleText = 'REFUND COMPLETED'; descText = 'é€€æ¬¾è¾¦ç†å®Œæˆ'; statusColor = '#EAB308'; }
                    else if (actionType === 'COMPLETE') { titleText = 'SERVICE COMPLETED'; descText = 'æœå‹™å·²å®Œæˆ'; statusColor = '#2563EB'; }
                    else if (actionType === 'PAYMENT_REQUEST') { 
                        titleText = 'PAYMENT REQUEST'; descText = 'è«‹è©³é–±ä»˜æ¬¾è¦å‰‡ä¸¦å®ŒæˆåŒ¯æ¬¾'; statusColor = '#2563EB'; 
                        const ruleText = formatForLine(getPaymentMessage(order.service, order.date));
                        bodyContents = [
                            { "type": "text", "text": `æœ¬æ¬¡è¨‚å–®ç¸½é‡‘é¡: NT$ ${total.toLocaleString()}`, "weight": "bold", "size": "md", "color": "#C69C6D", "align": "center", "margin": "md" },
                            { "type": "separator", "margin": "md" },
                            { "type": "text", "text": "ä»˜æ¬¾æ³¨æ„äº‹é …", "weight": "bold", "size": "md", "color": "#2563EB", "margin": "md" },
                            { "type": "text", "text": safeText(ruleText), "size": "xs", "color": "#666666", "wrap": true, "margin": "sm" },
                            { "type": "separator", "margin": "lg" },
                            { "type": "text", "text": "åŒ¯æ¬¾è³‡è¨Šï¼šå½°åŒ–éŠ€è¡Œ (009)", "size": "xs", "color": "#aaaaaa", "margin": "lg" },
                            { "type": "text", "text": "54320100686300", "weight": "bold", "size": "xl", "color": "#4A4A4A", "margin": "md", "align": "center", "wrap": true, "action": { "type": "clipboard", "clipboardText": "54320100686300", "label": "è¤‡è£½å¸³è™Ÿ" } },
                            { "type": "text", "text": "(é»æ“Šä¸Šæ–¹æ•¸å­—å³å¯è¤‡è£½)", "size": "xxs", "color": "#cccccc", "align": "center", "margin": "xs" }
                        ];
                    }

                    if (bodyContents.length === 0) {
                        bodyContents = [
                            { "type": "box", "layout": "vertical", "margin": "md", "spacing": "sm",
                                "contents": [
                                    { "type": "box", "layout": "horizontal", "contents": [ { "type": "text", "text": "å®¢æˆ¶å§“å", "size": "xs", "color": "#aaaaaa", "flex": 2 }, { "type": "text", "text": safeText(order.contactName), "size": "xs", "color": "#666666", "align": "end", "flex": 4, "weight": "bold" } ] },
                                    { "type": "box", "layout": "horizontal", "contents": [ { "type": "text", "text": "é ç´„æ—¥æœŸ", "size": "xs", "color": "#aaaaaa", "flex": 2 }, { "type": "text", "text": safeText(order.date), "size": "xs", "color": "#666666", "align": "end", "flex": 4, "weight": "bold" } ] },
                                    { "type": "box", "layout": "horizontal", "contents": [ { "type": "text", "text": config.time, "size": "xs", "color": "#aaaaaa", "flex": 2 }, { "type": "text", "text": safeText(order.time), "size": "xs", "color": "#666666", "align": "end", "flex": 4, "weight": "bold" } ] },
                                ]
                            },
                            { "type": "separator", "margin": "xl" },
                            { "type": "box", "layout": "vertical", "margin": "lg", "spacing": "sm", 
                                "contents": [
                                    { "type": "box", "layout": "horizontal", "contents": [ { "type": "text", "text": "ç¸½è¨ˆé‡‘é¡", "size": "sm", "color": "#aaaaaa", "flex": 2 }, { "type": "text", "text": `NT$ ${total.toLocaleString()}`, "size": "sm", "color": "#666666", "align": "end", "flex": 3, "weight": "bold" } ] },
                                    { "type": "box", "layout": "horizontal", "contents": [ { "type": "text", "text": "å·²æ”¶æ¬¾", "size": "sm", "color": "#10B981", "weight": "bold", "flex": 2 }, { "type": "text", "text": `NT$ ${paid.toLocaleString()}`, "size": "sm", "color": "#10B981", "align": "end", "weight": "bold", "flex": 3 } ] },
                                    { "type": "box", "layout": "horizontal", "contents": [ { "type": "text", "text": "å°šæ¬ å°¾æ¬¾", "size": "sm", "color": "#EF4444", "weight": "bold", "flex": 2 }, { "type": "text", "text": `NT$ ${balance.toLocaleString()}`, "size": "sm", "color": "#EF4444", "align": "end", "weight": "bold", "flex": 3 } ] }
                                ]
                            }
                        ];
                    }

                    return {
                        "type": "bubble", "size": "mega",
                        "header": { "type": "box", "layout": "vertical", "contents": [ { "type": "text", "text": safeText(titleText), "weight": "bold", "color": statusColor, "size": "xs", "align": "center" } ], "paddingBottom": "none" },
                        "body": { "type": "box", "layout": "vertical", "contents": [ { "type": "text", "text": `${config.icon} ${safeText(order.service)}`, "weight": "bold", "size": "xl", "align": "center", "color": "#4A4A4A", "wrap": true }, { "type": "text", "text": safeText(descText), "size": "sm", "color": "#999999", "align": "center", "margin": "xs" }, { "type": "separator", "margin": "md" }, ...bodyContents ] },
                        "footer": { "type": "box", "layout": "vertical", "contents": [ { "type": "text", "text": "å¦‚æœ‰ä»»ä½•å•é¡Œè«‹éš¨æ™‚ç§è¨Šæˆ‘å€‘", "size": "xxs", "color": "#cccccc", "align": "center" } ] }
                    };
                };

                const sendToMake = async (payload, flex) => {
                    const makePayload = { ...payload, notifyMake: 'true', flexContents: flex, flexJson: JSON.stringify(flex) };
                    return fetch(SEND_MSG_WEBHOOK, { method: 'POST', headers: { 'Content-Type': 'application/json; charset=UTF-8' }, body: JSON.stringify(makePayload) });
                };

                const updateOrderStatus = async (actionType) => {
                    const order = selectedOrder.value;
                    if (!order) return;
                    if (!order.userId) return Swal.fire('ç„¡æ³•ç™¼é€', 'æ­¤è¨‚å–®æ²’æœ‰æŠ“åˆ°å®¢äººçš„ LINE ID', 'warning');
                    
                    const { isConfirmed } = await Swal.fire({ title: 'ç¢ºèªç™¼é€é€šçŸ¥ï¼Ÿ', text: `å³å°‡ç™¼é€ LINE é€šçŸ¥çµ¦ ${order.contactName}`, icon: 'question', showCancelButton: true, confirmButtonText: 'ç¢ºå®šç™¼é€', cancelButtonText: 'å–æ¶ˆ' });
                    if (isConfirmed) {
                        try {
                            Swal.fire({ title: 'è™•ç†ä¸­...', text: 'æ­£åœ¨æ›´æ–°', allowOutsideClick: false, didOpen: () => Swal.showLoading() });
                            const flex = buildRichFlexMessage(order, actionType);
                            const price = order.rawPrice, received = order.receivedPrice;
                            const payload = { action: 'UPDATE_ORDER', orderId: order.oid, status: actionType, price, received, to: order.userId, flexContents: flex };

                            await Promise.all([
                                fetch(DATA_API_URL, { method: 'POST', body: JSON.stringify(payload) }).catch(() => {}),
                                sendToMake(payload, flex).catch(() => {})
                            ]);
                            
                            await fetchData();
                            Swal.fire('æˆåŠŸ', 'ç‹€æ…‹å·²æ›´æ–°', 'success');
                        } catch (e) { Swal.fire('éŒ¯èª¤', e.message, 'error'); }
                    }
                };
                
                const handlePriceFocus = () => { if (!isEditing.value) startEdit(); };
                const startEdit = () => { 
                    const formData = { ...selectedOrder.value };
                    if (formData.date && formData.date.includes('/')) formData.date = formData.date.replace(/\//g, '-');
                    editForm.value = formData; 
                    isEditing.value = true; 
                };
                const cancelEdit = () => { isEditing.value = false; };
                
                const saveEdit = async () => {
                    const { isConfirmed, isDenied } = await Swal.fire({ title: 'å„²å­˜è®Šæ›´', text: 'æ‚¨å¸Œæœ›åŒæ™‚ç™¼é€ LINE é€šçŸ¥çµ¦å®¢äººå—ï¼Ÿ', icon: 'question', showDenyButton: true, showCancelButton: true, confirmButtonText: 'å„²å­˜ä¸¦ç™¼é€é€šçŸ¥', denyButtonText: 'åƒ…å„²å­˜ (ä¸é€šçŸ¥)', cancelButtonText: 'å–æ¶ˆ' });
                    if (!isConfirmed && !isDenied) return;

                    const order = selectedOrder.value;
                    const shouldNotify = isConfirmed;
                    Swal.fire({ title: 'å„²å­˜ä¸­...', didOpen: () => Swal.showLoading() });
                    
                    const flex = buildRichFlexMessage({ ...order, ...editForm.value }, 'UPDATE');
                    const payload = { 
                        action: 'UPDATE_ORDER', orderId: order.oid, 
                        lineName: editForm.value.lineName, clientName: editForm.value.contactName, 
                        phone: editForm.value.phone, date: editForm.value.date, 
                        time: editForm.value.time, location: editForm.value.location,
                        price: parseMoney(editForm.value.rawPrice), received: parseMoney(editForm.value.receivedPrice),
                        to: shouldNotify ? order.userId : ''
                    };

                    try {
                        await Promise.all([
                            fetch(DATA_API_URL, { method: 'POST', body: JSON.stringify(payload) }).catch(() => {}),
                            shouldNotify ? sendToMake(payload, flex).catch(() => {}) : Promise.resolve()
                        ]);
                        await fetchData();
                        isEditing.value = false;
                        Swal.fire('æˆåŠŸ', 'è³‡æ–™å·²æ›´æ–°', 'success');
                    } catch (e) { Swal.fire('éŒ¯èª¤', e.message, 'error'); }
                };

                onMounted(() => { fetchData(); setInterval(fetchData, 30000); });
                
                return { 
                    reservations, selectedOrder, filter, loading, errorMsg, filteredList, 
                    selectOrder, fetchData, updateOrderStatus, getStatusText, getLabel,
                    isEditing, editForm, startEdit, cancelEdit, saveEdit, formatMoney, displayRawPrice, displayReceivedPrice,
                    isTimeSlotService, timeSlots, fillFullPayment, lastUpdated, handlePriceFocus,
                    searchQuery, filterDate, filterService, clearFilters, configMap, highlightText,
                    currentMonthYear, calendarDays, changeMonth
                };
            }
        }).mount('#app');
    </script>
</body>
</html>
